type: map
allowempty: yes
mapping:
  commonfields:
    type: map
    required: yes
    mapping:
      id:
        type: str
        required: yes
      version:
        type: int
        required: yes
  name:
    type: str
    required: yes
  display:
      type: str
      required: yes
  category:
    type: str
    required: yes
  image:
    type: str
    required: yes
  description:
    type: str
    required: yes
  configuration:
    type: seq
    required: yes
    sequence:
    - include: configuration_schema
  script:
    type: map
    required: yes
    mapping:
      script:
        type: str
        required: yes
      type:
        type: str
        required: yes
      dockerimage:
        type: str
      isfetch:
        type: bool
      commands:
        type: seq
        sequence:
        - include: command_schema
  system:
    type: bool

schema;commonfields_schema:

# integration->configuration
schema;configuration_schema:
  type: map
  required: yes
  mapping:
    display:
      type: str
      required: yes
    defaultvalue:
      type: text
    name:
      type: str
      required: yes
    type:
      type: int
      required: yes
    required:
      type: bool

# integration->script->command
schema;command_schema:
  type: map
  mapping:
    name:
      type: str
      required: yes
    execution:
      type: bool
    description:
      type: str
      required: yes
    arguments:
      type: seq
      required: yes
      sequence:
        - type: any
    outputs:
      type: seq
      sequence:
      - include: output_schema
    important:
      type: seq
      - include: important_schema

schema;output_schema:
  type: map
  mapping:
    contentPath:
      type: str
    contextPath:
      type: str
    description:
      type: str
      required: yes

schema;important_schema:
  type: map
  mapping:
    contextPath:
      type: str
      required: yes
    description:
      type: str
      required: yes
    related:
      type: str