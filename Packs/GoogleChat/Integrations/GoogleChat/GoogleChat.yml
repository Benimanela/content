category: Messaging and Conferencing
commonfields:
  id: GoogleChat
  version: -1
configuration:
- section: Connect
  display: Server URL
  name: server_url
  type: 0
  required: true
  defaultvalue: 'https://chat.googleapis.com'
- section: Connect
  display: Space ID
  name: space_id
  type: 0
  required: false
- section: Connect
  displaypassword: Space Key
  name: space_key
  required: false
  hiddenusername: true
  type: 9
- section: Connect
  displaypassword: Service Account JSON
  name: service_account_json
  required: true
  hiddenusername: true
  type: 9
- section: Connect
  display: App URL
  required: false
  name: appUrl
  type: 0
  hiddenusername: true
  additionalinfo: The XSOAR URL. Required if "Long running instance" is enabled.
- display: Long running instance
  name: longRunning
  type: 8
  required: false
  additionalinfo: Required if using GoogleChat-Ask Script.
- display: Listen Port
  name: longRunningPort
  type: 0
  section: Connect
  required: false
  additionalinfo: You must enable Long running instance to run the web server on this port from within Cortex XSOAR. Requires a unique port for each long-running integration instance. Do not use the same port for multiple instances.
- display: Trust any certificate (not secure)
  name: insecure
  defaultvalue: "false"
  type: 8
  required: false
description: Google chat integration enables you to send messages and send survey bot.
display: Google Chat
name: GoogleChat
script:
  commands:
  - name: send-notification
    arguments:
    - name: message
      required: true
      description: The message content.
      type: textArea
    - name: to
      description: The recipient of the message.
      type: textArea
    - name: space_id
      required: false
      description: The ID of the space to which to send the message. If configured, this argument will override the Space ID from the instance configuration.
      type: textArea
    - name: thread_id
      description: If replying to a thread, use this argument to specify the thread
        name to reply to.
      type: textArea
    - name: adaptive_card
      description: 'Card to send. See Card Builder here: https://addons.gsuite.google.com/uikit/builder.'
      type: textArea
    - name: entitlement
      hidden: true
      description: Full entitlement for GoogleChatAsk script.
      type: textArea
    - name: expiry
      hidden: true
      description: Expiry time for waiting to the user response.
      type: textArea
    - name: default_response
      hidden: true
      description: Default response if the expiration time of the message has exceeded.
      type: textArea
    - name: reply
      hidden: true
      description: The reply which is being sent to the user after the survey is answered.
      type: textArea
    description: Send messages through google chat.
    outputs:
    - contextPath: GoogleChat.sender.name
      description: Display the sender name.
    - contextPath: GoogleChat.sender.displayName
      description: Display the sender display name.
    - contextPath: GoogleChat.sender.type
      description: Display the sender type.
    - contextPath: GoogleChat.space.name
      description: Display the space name.
    - contextPath: GoogleChat.space.displayName
      description: Display the space display name.
    - contextPath: GoogleChat.space.type
      description: Display the space type.
    - contextPath: GoogleChat.thread.name
      description: Display the thread name.
    - contextPath: GoogleChat.thread.threadKey
      description: Display the thread key.
  runonce: false
  longRunning: true
  longRunningPort: true
  script: '-'
  type: python
  subtype: python3
  dockerimage: devdemisto/google-chat:1.0.0.103490
fromversion: 5.5.0
tests:
- No tests (auto formatted)
